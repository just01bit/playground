const { extend, lazify } = require ('./mixins')
const core = new class cds extends require('events'){}
const c = lazy => cds.builtin.classes [lazy]
require = lazify(module)  // eslint-disable-line

const cds = module.exports = { __proto__:core,

	builtin: require ('./core'),
	Association:c, Composition:c,
	service:c, context:c,
	entity:c,
	struct:c,
	type:c,
	array:c,

	reflect: require ('./reflect'),
	linked: require ('./link'),
	infer: require ('./infer'),

	lazified:lazify, lazify, extend,
	mixin (...aspects){ return extend(this) .with (...aspects) },
	clone: m => JSON.parse (JSON.stringify(m)),
	set: lazy => cds.type.prototype.set

}
