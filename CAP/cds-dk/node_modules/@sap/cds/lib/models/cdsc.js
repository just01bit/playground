/* eslint-disable no-console */

const cdsc = require ('@sap/cds-compiler')
const cds = require ('../cds')
module.exports = cdsc


const DEBUG = cds.debug ('snapi')
if (DEBUG) {
    _debug (cdsc.for, 'compile.for.')
    _debug (cdsc.to, 'compile.to.')
    _debug (cdsc, 'cdsc.')
}
function _debug (cdsc, _prefix='') {
    for (let [each,fn] of Object.entries(cdsc)) if (typeof fn === 'function') cdsc[each] = (...args) => {
        console.log ('---------------------------')
        if (each === 'compile') console.trace (_prefix+each,...args)
        else console.trace (_prefix+each,args[1])
        console.log ('---------------------------')
        return fn (...args)
    }
    return cdsc
}
