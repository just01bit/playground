const getError = require('../../util/getError')

module.exports = req => {
  const target = req.target ? req.target.name : undefined
  const e = new Error(`No handler registered for ${req.event}${target ? ` ${req.target.name}` : ''}`)
  e.query = req.query
  e.event = req.event
  e.target = target
  console.error(e) // eslint-disable-line no-console
  throw process.env.NODE_ENV === 'production' ? getError(501) : e
}
